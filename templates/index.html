<!doctype html>
<html lang="en" ng-app="calculatingPalico">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>the Calculating Palico</title>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.4.7/css/normalize.min.css">
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.1.6/css/material.min.css">
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
	<link rel=stylesheet href="{{ url_for('static', filename='style.css') }}">
	<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular-resource.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.1/ui-bootstrap-tpls.min.js"></script>
</head>
<body>
<nav class="navbar navbar-material-brown navbar-static-top" role="navigation" data-swiftype-index="false">
	<div class="container">
		<div class="navbar-header">
			<a href="/calculatingpalico/" class="navbar-brand">the Calculating Palico</a>
		</div>
	</div>
</nav>

<div class="container" ng-controller="calculatingPalicoController">
	<div class="row">
		<div class="col-xs-12 col-sm-8">
			<div class="panel panel-default">
				<div class="panel-heading">Choose Weapon</div>
				<div class="panel-body">
					<div class="row">
						<div class="col-xs-6 col-sm-6 text-right">
							<select id="weapon_type_list" name="weapon_type_list" ng-options="weaponType.id as weaponType.name for weaponType in weaponTypes" ng-model="weaponTypeValue" ng-change="updateWeaponList()"></select>
						</div>
						<div class="col-xs-6 col-sm-6">
							<select id="weapon_list" name="weapon_list" ng-options="weapon.id as weapon.name for weapon in weapons | orderBy:'name'" ng-model="weaponValue" ng-change="updateWeapon()"></select>
						</div>
					</div>
					<div ng-show="weaponValue">
						<div class="row top_row">
							<div class="col-xs-6 col-sm-6 text-right">Damage</div>
							<div class="col-xs-6 col-sm-6"><%weaponDetails.attack%></div>
						</div>
						<div class="row">
							<div class="col-xs-6 col-sm-6 text-right">Affinity</div>
							<div class="col-xs-6 col-sm-6"><%weaponDetails.affinity%></div>
						</div>
						<div class="row" ng-repeat="weaponElement in weaponDetails.elements">
							<div class="col-xs-6 col-sm-6 text-right">Element</div>
							<div class="col-xs-6 col-sm-6">
								<%weaponElement.attack%> <i class="fa fa-circle element_marker <%weaponElement.name%>" ng-if="weaponElement.awaken_required == 0"></i><i class="fa fa-circle-o element_marker <%weaponElement.name%>" ng-if="weaponElement.awaken_required == 1"></i> <%weaponElement.name%>
							</div>
						</div>
						<div class="row">
							<div class="col-xs-6 col-sm-6 text-right">Sharpness</div>
							<div class="col-xs-6 col-sm-6">
								<div id="sharpness">
									<span style="width:<%weaponSharpness[0]%>px" class="red"></span>
									<span style="width:<%weaponSharpness[1]%>px" class="orange"></span>
									<span style="width:<%weaponSharpness[2]%>px" class="yellow"></span>
									<span style="width:<%weaponSharpness[3]%>px" class="green"></span>
									<span style="width:<%weaponSharpness[4]%>px" class="blue"></span>
									<span style="width:<%weaponSharpness[5]%>px" class="white"></span>
									<span style="width:<%weaponSharpness[6]%>px" class="purple"></span>
									<span style="width:<%weaponSharpnessPlus[0]%>px" class="red plus<%sharpnessCSS%>"></span>
									<span style="width:<%weaponSharpnessPlus[1]%>px" class="orange plus<%sharpnessCSS%>"></span>
									<span style="width:<%weaponSharpnessPlus[2]%>px" class="yellow plus<%sharpnessCSS%>"></span>
									<span style="width:<%weaponSharpnessPlus[3]%>px" class="green plus<%sharpnessCSS%>"></span>
									<span style="width:<%weaponSharpnessPlus[4]%>px" class="blue plus<%sharpnessCSS%>"></span>
									<span style="width:<%weaponSharpnessPlus[5]%>px" class="white plus<%sharpnessCSS%>"></span>
									<span style="width:<%weaponSharpnessPlus[6]%>px" class="purple plus<%sharpnessCSS%>"></span>
								</div>
							</div>
						</div>
						<div class="row top_row">
							<div class="col-xs-12 col-sm-12 text-center"><a href="<%weaponDetails.url_kiranico%>">Kiranico <i class="fa fa-external-link"></i></a></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xs-12 col-sm-4">
			<div class="panel panel-default">
				<div class="panel-heading">Choose Target Meownster</div>
				<div class="panel-body">
					<div class="row">
						<div class="col-xs-12 col-sm-12 text-center">
							<select id="monster_list" name="monster_list" ng-options="monster.id as monster.name for monster in monsters | orderBy:'name'" ng-model="monsterValue" ng-change="updateMonster()"></select>
						</div>
					</div>
					<div ng-show="monsterValue">
						<div class="weakness_summary">
							<div class="row top_row">
								<div class="col-xs-12 col-sm-12 text-center"><div class="row">Weakness Averages</div></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right">Cut</div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[0]%></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right">Impact</div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[1]%></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right">Shot</div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[2]%></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right"><span class="Fire">Fire</span></div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[3]%></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right"><span class="Water">Water</span></div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[4]%></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right"><span class="Ice">Ice</span></div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[5]%></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right"><span class="Thunder">Thunder</span></div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[6]%></div>
							</div>
							<div class="row">
								<div class="col-xs-6 col-sm-6 text-right"><span class="Dragon">Dragon</span></div>
								<div class="col-xs-6 col-sm-6"><%monsterWeaknesses[7]%></div>
							</div>
						</div>
						<div class="row top_row">
							<div class="col-xs-12 col-sm-12 text-center">
								<a href="<%monsterDetails.url_kiranico%>">Kiranico <i class="fa fa-external-link"></i></a>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-xs-12 col-sm-12">
			<div class="panel panel-default">
				<div class="panel-heading">Choose Meowdifiers</div>
				<div class="panel-body modifiers">
					<div ng-repeat="column in modifierHtmlDisplayGroups" class="col-xs-12 col-md-3">
						<div ng-repeat="group in column">
							<div class="row">
								<div class="col-xs-8 col-sm-8 text-right section_header"><i class="fa fa-cog"></i> <strong><%group.displayName%></strong></strong></div>
							</div>
							<div ng-repeat="modifier in group.modifiers" class="row <%joinTags(modifiers[modifier].effectGroups)%>">
								<div class="col-xs-8 col-sm-8 text-right"><%modifiers[modifier].name%></div>
								<div class="col-xs-4 col-sm-4"><input type="checkbox" name="mod_ha" ng-checked="modifiers[modifier].on==true" ng-click="updateModifiers(modifier)"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-xs-12 col-sm-12">
			<div class="panel panel-default">
				<div class="panel-heading">Damage Calculation</div>
				<div ng-show="weaponValue && monsterValue" class="panel-body">
					<table class="table table-condensed table-hover table-bordered table-striped">
						<thead>
							<td><strong><%weaponDetails.name%> vs <%monsterDetails.name%></strong></td>
							<td></td>
							<td ng-show="showParts" ng-repeat="monsterDamage in monsterDetails.damage" class="dmg_td"><%monsterDamage.name%></td>
						</thead>
						<tr>
							<td>Sharpness: <select id="weapon_sharpness" name="weapon_sharpness" ng-init="sharpnessValue" ng-options="sharpness.id as sharpness.name for sharpness in weaponSharpnessDisplay" ng-model="sharpnessValue"></select>
							<i class="fa fa-caret-square-o-down" ng-model="showMoves" ng-click="showMoves=!showMoves"></i> <i class="fa fa-caret-square-o-right" ng-model="showParts" ng-click="showParts=!showParts"></i>
							</td>
							<td class="dmg_td">
								<span class="dmg"><%(allDamageRange = calcDamageFromRange(usableMoves, weaponDetails, weaponTypeDetails, monsterDetails.damage, weaponElements, sharpnessValue, modSummary)).min.physicalDamage%></span><span ng-repeat="element in weaponElements" class="element_dmg <%element.name%>" ng-if="element.id < 6 && (element.awaken_required == 0 || (element.awaken_required == 1 && (modifiers.groupAwaken.awaken.on == true || modifiers.groupElem.arc.on == true)))"><%"+" + allDamageRange.min.elementalDamage[$index]%></span>
								~ 
								<span class="dmg"><%allDamageRange.max.physicalDamage%></span><span ng-repeat="element in weaponElements" class="element_dmg <%element.name%>" ng-if="element.id < 6 && (element.awaken_required == 0 || (element.awaken_required == 1 && (modifiers.groupAwaken.awaken.on == true || modifiers.groupElem.arc.on == true)))"><%"+" + allDamageRange.max.elementalDamage[$index]%></span>
							</td>
							<td ng-show="showParts" ng-repeat="monsterDamage in monsterDetails.damage" class="dmg_td">
								<span class="dmg"><%(partDamageRange = calcDamageFromRange(usableMoves, weaponDetails, weaponTypeDetails, [monsterDamage], weaponElements, sharpnessValue, modSummary)).min.physicalDamage%></span><span ng-repeat="element in weaponElements" class="element_dmg <%element.name%>" ng-if="element.id < 6 && (element.awaken_required == 0 || (element.awaken_required == 1 && (modifiers.groupAwaken.awaken.on == true || modifiers.groupElem.arc.on == true)))"><%"+" + partDamageRange.min.elementalDamage[$index]%></span> 
								~																																																																																																																					 
								<span class="dmg"><%partDamageRange.max.physicalDamage%></span><span ng-repeat="element in weaponElements" class="element_dmg <%element.name%>" ng-if="element.id < 6 && (element.awaken_required == 0 || (element.awaken_required == 1 && (modifiers.groupAwaken.awaken.on == true || modifiers.groupElem.arc.on == true)))"><%"+" + partDamageRange.max.elementalDamage[$index]%></span> 
							</td>
						</tr>
						<tr ng-show="showMoves" ng-repeat="weaponMotion in usableMoves">
							<td><%weaponMotion.name%></td>
							<td class="dmg_td">
							<span class="dmg"><%(motionDamageRange = calcDamageFromRange([weaponMotion], weaponDetails, weaponTypeDetails, monsterDetails.damage, weaponElements, sharpnessValue, modSummary)).min.physicalDamage%></span><span ng-repeat="element in weaponElements" class="element_dmg <%element.name%>" ng-if="element.id < 6 && (element.awaken_required == 0 || (element.awaken_required == 1 && (modifiers.groupAwaken.awaken.on == true || modifiers.groupElem.arc.on == true)))"><%"+" + motionDamageRange.min.elementalDamage[$index]%></span>
							~																																																																																																																				
							<span class="dmg"><%motionDamageRange.max.physicalDamage%></span><span ng-repeat="element in weaponElements" class="element_dmg <%element.name%>" ng-if="element.id < 6 && (element.awaken_required == 0 || (element.awaken_required == 1 && (modifiers.groupAwaken.awaken.on == true || modifiers.groupElem.arc.on == true)))"><%"+" + motionDamageRange.max.elementalDamage[$index]%></span>
							</td>
							<td ng-show="showParts" ng-repeat="monsterDamage in monsterDetails.damage" class="dmg_td"><span class="dmg"><%(calculatedDamage = calcDamage(weaponMotion, weaponDetails, weaponTypeDetails, monsterDamage.damage, weaponElements, sharpnessValue, modSummary)).physicalDamage%></span><span ng-repeat="element in weaponElements" class="element_dmg <%element.name%>" ng-if="element.id < 6 && (element.awaken_required == 0 || (element.awaken_required == 1 && (modifiers.groupAwaken.awaken.on == true || modifiers.groupElem.arc.on == true)))"><%"+" + calculatedDamage.elementalDamage[$index]%></span></td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="{{ url_for('static', filename='include.js') }}"></script>
</body>
</html>